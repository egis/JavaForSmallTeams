
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Prefer Composition Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-etoc/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-pygments/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="100_consider_code_generators_carefully.html" />
    
    
    <link rel="prev" href="051_optimise_for_readability_not_performance.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../process.html">
            
                <a href="../process.html">
            
                    
                    Process
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../process/100_build_fast_feedback_loops.html">
            
                <a href="../process/100_build_fast_feedback_loops.html">
            
                    
                    Build Fast Feedback Loops
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../process/200_instant_feedback.html">
            
                <a href="../process/200_instant_feedback.html">
            
                    
                    Instant Feedback
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../process/300_fast_feedback.html">
            
                <a href="../process/300_fast_feedback.html">
            
                    
                    Fast Feedback
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../process/400_slower_feedback.html">
            
                <a href="../process/400_slower_feedback.html">
            
                    
                    Slower Feedback
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../process/600_agree_the_language_you_use_for_tests.html">
            
                <a href="../process/600_agree_the_language_you_use_for_tests.html">
            
                    
                    Agree The Language You Use For Tests
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../process/700_use_coverage_as_a_tool_not_a_target.html">
            
                <a href="../process/700_use_coverage_as_a_tool_not_a_target.html">
            
                    
                    Use Coverage As A Tool Not A Target
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../style.html">
            
                <a href="../style.html">
            
                    
                    Style
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="001_remember_kiss_and_yagni.html">
            
                <a href="001_remember_kiss_and_yagni.html">
            
                    
                    Remember Kiss And Yagni
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="002_prefer_reversible_decisions.html">
            
                <a href="002_prefer_reversible_decisions.html">
            
                    
                    Prefer Reversible Decisions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="010_use_a_consistent_code_layout.html">
            
                <a href="010_use_a_consistent_code_layout.html">
            
                    
                    Use A Consistent Code Layout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="020_prefer_readable_code_to_comments.html">
            
                <a href="020_prefer_readable_code_to_comments.html">
            
                    
                    Prefer Readable Code To Comments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="030_javadoc_judiciously.html">
            
                <a href="030_javadoc_judiciously.html">
            
                    
                    Javadoc Judiciously
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="040_keep_your_code_dry.html">
            
                <a href="040_keep_your_code_dry.html">
            
                    
                    Keep Your Code Dry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="041_prefer_immutable_objects.html">
            
                <a href="041_prefer_immutable_objects.html">
            
                    
                    Prefer Immutable Objects
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="051_optimise_for_readability_not_performance.html">
            
                <a href="051_optimise_for_readability_not_performance.html">
            
                    
                    Optimise For Readability Not Performance
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.9" data-path="052_prefer_composition.html">
            
                <a href="052_prefer_composition.html">
            
                    
                    Prefer Composition
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10" data-path="100_consider_code_generators_carefully.html">
            
                <a href="100_consider_code_generators_carefully.html">
            
                    
                    Consider Code Generators Carefully
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.11" data-path="200_group_methods_for_easy_comprehension.html">
            
                <a href="200_group_methods_for_easy_comprehension.html">
            
                    
                    Group Methods For Easy Comprehension
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.12" data-path="300_keep_methods_small_and_simple.html">
            
                <a href="300_keep_methods_small_and_simple.html">
            
                    
                    Keep Methods Small And Simple
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.13" data-path="400_methods_should_do_one_thing.html">
            
                <a href="400_methods_should_do_one_thing.html">
            
                    
                    Methods Should Do One Thing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.14" data-path="600_avoid_null.html">
            
                <a href="600_avoid_null.html">
            
                    
                    Avoid Null
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.15" data-path="601_keep_it_solid.html">
            
                <a href="601_keep_it_solid.html">
            
                    
                    Keep It Solid
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.16" data-path="700_use_final_liberally.html">
            
                <a href="700_use_final_liberally.html">
            
                    
                    Use Final Liberally
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.17" data-path="800_provide_no_more_than_one_worker_constructor.html">
            
                <a href="800_provide_no_more_than_one_worker_constructor.html">
            
                    
                    Provide No More Than One Worker Constructor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.18" data-path="900_avoid_checked_exceptions.html">
            
                <a href="900_avoid_checked_exceptions.html">
            
                    
                    Avoid Checked Exceptions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.19" data-path="901_make_dependencies_explicit.html">
            
                <a href="901_make_dependencies_explicit.html">
            
                    
                    Make Dependencies Explicit
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../specifics.html">
            
                <a href="../specifics.html">
            
                    
                    Specifics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../specifics/100_know_how_to_implement_hashcode_and_equals.html">
            
                <a href="../specifics/100_know_how_to_implement_hashcode_and_equals.html">
            
                    
                    Know How To Implement Hashcode And Equals
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../specifics/200_do_not_reassign_parameters.html">
            
                <a href="../specifics/200_do_not_reassign_parameters.html">
            
                    
                    Do Not Reassign Parameters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../specifics/300_limit_scope.html">
            
                <a href="../specifics/300_limit_scope.html">
            
                    
                    Limit Scope
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../specifics/400_prefer_for_each_loops_to_for_loops.html">
            
                <a href="../specifics/400_prefer_for_each_loops_to_for_loops.html">
            
                    
                    Prefer For Each Loops To For Loops
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../specifics/500_prefer_maps_and_filters_to_imperative_loops.html">
            
                <a href="../specifics/500_prefer_maps_and_filters_to_imperative_loops.html">
            
                    
                    Prefer Maps And Filters To Imperative Loops
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../specifics/600_avoid_apis_from_prehistory.html">
            
                <a href="../specifics/600_avoid_apis_from_prehistory.html">
            
                    
                    Avoid Apis From Prehistory
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../specifics/700_beware_casts_and_generics_warnings.html">
            
                <a href="../specifics/700_beware_casts_and_generics_warnings.html">
            
                    
                    Beware Casts And Generics Warnings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="../specifics/800_do_not_use_magic_numbers.html">
            
                <a href="../specifics/800_do_not_use_magic_numbers.html">
            
                    
                    Do Not Use Magic Numbers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="../specifics/800_do_not_use_the_assert_keyword.html">
            
                <a href="../specifics/800_do_not_use_the_assert_keyword.html">
            
                    
                    Do Not Use The Assert Keyword
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.10" data-path="../specifics/900_avoid_floats_and_doubles.html">
            
                <a href="../specifics/900_avoid_floats_and_doubles.html">
            
                    
                    Avoid Floats And Doubles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.11" data-path="../specifics/1000_do_not_use_reflection.html">
            
                <a href="../specifics/1000_do_not_use_reflection.html">
            
                    
                    Do Not Use Reflection
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../tests.html">
            
                <a href="../tests.html">
            
                    
                    Tests
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../tests/100_write_specifications_not_tests.html">
            
                <a href="../tests/100_write_specifications_not_tests.html">
            
                    
                    Write Specifications Not Tests
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../tests/200_think_units_not_methods.html">
            
                <a href="../tests/200_think_units_not_methods.html">
            
                    
                    Think Units Not Methods
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../tests/300_name_tests_with_a_specification_style.html">
            
                <a href="../tests/300_name_tests_with_a_specification_style.html">
            
                    
                    Name Tests With A Specification Style
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../tests/400_pick_examples_carefully.html">
            
                <a href="../tests/400_pick_examples_carefully.html">
            
                    
                    Pick Examples Carefully
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../tests/500_make_tests_easy_to_understand.html">
            
                <a href="../tests/500_make_tests_easy_to_understand.html">
            
                    
                    Make Tests Easy To Understand
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../tests/600_understand_how_to_use_mocks_and_stubs.html">
            
                <a href="../tests/600_understand_how_to_use_mocks_and_stubs.html">
            
                    
                    Understand How To Use Mocks And Stubs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="../tests/700_understand_your_options_for_code_reuse.html">
            
                <a href="../tests/700_understand_your_options_for_code_reuse.html">
            
                    
                    Understand Your Options For Code Reuse
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="../tests/750_write_repeatable_tests.html">
            
                <a href="../tests/750_write_repeatable_tests.html">
            
                    
                    Write Repeatable Tests
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="../tests/800_only_unit_test_code_it_makes_sense_to_unit_test.html">
            
                <a href="../tests/800_only_unit_test_code_it_makes_sense_to_unit_test.html">
            
                    
                    Only Unit Test Code It Makes Sense To Unit Test
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.10" data-path="../tests/900_testing_FAQS.html">
            
                <a href="../tests/900_testing_FAQS.html">
            
                    
                    Testing FAQS
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../badadvice.html">
            
                <a href="../badadvice.html">
            
                    
                    Bad advice
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../badadvice/010_use_getters_and_setters.html">
            
                <a href="../badadvice/010_use_getters_and_setters.html">
            
                    
                    Always use Getters and Setters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../badadvice/100_single_exit_point_rules.html">
            
                <a href="../badadvice/100_single_exit_point_rules.html">
            
                    
                    Single Exit Point Rules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../badadvice/200_always_use_a_StringBuffer.html">
            
                <a href="../badadvice/200_always_use_a_StringBuffer.html">
            
                    
                    Always Use A StringBuffer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../badadvice/300_hungarian_notation.html">
            
                <a href="../badadvice/300_hungarian_notation.html">
            
                    
                    Hungarian Notation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Prefer Composition</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="prefer-composition-to-inheritance"><a name="prefer-composition-to-inheritance" class="plugin-anchor" href="#prefer-composition-to-inheritance"><i class="fa fa-link" aria-hidden="true"></i></a>Prefer Composition to Inheritance</h2>
<h3 id="summary"><a name="summary" class="plugin-anchor" href="#summary"><i class="fa fa-link" aria-hidden="true"></i></a>Summary</h3>
<p>Composition usually results in more flexible designs.</p>
<p>First consider using composition, then fall back to using inheritance only when composition does not seem to be a good fit.</p>
<h3 id="details"><a name="details" class="plugin-anchor" href="#details"><i class="fa fa-link" aria-hidden="true"></i></a>Details</h3>
<p>Composition means building things by adding other things together. Inheritance is building things by extending behavior based on an existing class by creating a child classes.</p>
<p>To take a minimal example- If there is a requirement for a class to accept and store String values, some programmers new to Java will reach for inheritance as follows:</p>
<pre><code class="lang-java"><span class="kd">class</span> <span class="nc">InheritanceAbuse</span> <span class="kd">extends</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">performBusinessLogic</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// do things with stored strings</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre>
<p>The same functionality can be implemented using composition.</p>
<pre><code class="lang-java"><span class="kd">class</span> <span class="nc">UsesComposition</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">values</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;();</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">performBusinessLogic</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// do things with stored strings</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="n">String</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">values</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre>
<p>Despite requiring more code, an experienced Java programmer would not even consider the first approach. So why is it that the second version is preferable?</p>
<p>There are several overlapping explanations, we&apos;ll start with the most abstract and move on to more practical ones.</p>
<h4 id="inheritance-is-a-strong-relationship"><a name="inheritance-is-a-strong-relationship" class="plugin-anchor" href="#inheritance-is-a-strong-relationship"><i class="fa fa-link" aria-hidden="true"></i></a>Inheritance is a Strong Relationship</h4>
<p>Inheritance is used to model an IS-A relationship - i.e. we are saying that our <code>InheritanceAbuse</code> class is an ArrayList and we should be able to pass one to any piece of code that accepts an ArrayList.</p>
<p>Composition creates a HAS-A relationship; this is a weaker relationship and we should always favor weaker relationships in our code.</p>
<p>So favoring composition over inheritance is just one specific instance of the more general advice to favor weak relationships between our classes.</p>
<p>Using inheritance makes sense when there is an IS-A relationship there but it is an inappropriate mechanism to use purely for reusing code.</p>
<h4 id="inheritance-breaks-encapsulation"><a name="inheritance-breaks-encapsulation" class="plugin-anchor" href="#inheritance-breaks-encapsulation"><i class="fa fa-link" aria-hidden="true"></i></a>Inheritance Breaks Encapsulation</h4>
<p>The inheritance implementation fails to encapsulate an implementation detail - that we&apos;re storing things in an ArrayList.</p>
<p>The interface to our class includes all sort of methods from ArrayList such as:</p>
<ul>
<li>clear</li>
<li>remove</li>
<li>contains</li>
</ul>
<p>Do these methods make sense for our class? If someone calls them, could it interfere with the logic in <code>performBusinessLogic</code>?</p>
<p>We don&apos;t know enough about what our example class is meant to do to answer these questions definitively, but the answer is most likely that we would prefer not to expose these methods.</p>
<p>If we switch from ArrayList to some other list implementation this is visible to the classes clients. Code that previously compiled may now break even if no methods specific to ArrayList are called - the change of type alone might cause compilation failures.</p>
<h4 id="we-can-only-do-this-once"><a name="we-can-only-do-this-once" class="plugin-anchor" href="#we-can-only-do-this-once"><i class="fa fa-link" aria-hidden="true"></i></a>We Can Only Do This Once</h4>
<p>Java doesn&apos;t support multiple inheritance so we only get to pick one thing to extend. If our class also needed to store Integers then inheritance isn&apos;t even an option so we&apos;d have to use composition.</p>
<p>Composition is inherently more flexible in single inheritance languages.</p>
<h4 id="composition-aids-testing"><a name="composition-aids-testing" class="plugin-anchor" href="#composition-aids-testing"><i class="fa fa-link" aria-hidden="true"></i></a>Composition Aids Testing</h4>
<p>This is not relevant to our simple example, but it is trivial to test how classes linked together by composition interact. It is far harder when inheritance is used.</p>
<pre><code class="lang-java"><span class="kd">class</span> <span class="nc">MyUntestableClass</span> <span class="kd">extends</span> <span class="n">SomeDependency</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">performBusinessLogic</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// do things using methods from SomeDependency</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<pre><code class="lang-java"><span class="kd">class</span> <span class="nc">MyClass</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">SomeDependency</span> <span class="n">dependency</span><span class="o">;</span>

  <span class="n">MyClass</span><span class="o">(</span><span class="n">SomeDependency</span> <span class="n">dependency</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">dependency</span> <span class="o">=</span> <span class="n">dependency</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">performBusinessLogic</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// do things with dependency</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p>It is easy to inject a mock into <code>MyClass</code>. Tricks exist to isolate the code in <code>MyUntestableClass</code> from <code>SomeDependency</code> for the purpose of unit testing, but they are far more involved.</p>
<h4 id="inheritance-is-static"><a name="inheritance-is-static" class="plugin-anchor" href="#inheritance-is-static"><i class="fa fa-link" aria-hidden="true"></i></a>Inheritance is Static</h4>
<p>Inheritance sets a fixed relationship between concrete classes at compile time. With composition it is possible to swap in different concrete classes at runtime.</p>
<p>Again composition is inherently more flexible.</p>
<h3 id="interface-inheritance"><a name="interface-inheritance" class="plugin-anchor" href="#interface-inheritance"><i class="fa fa-link" aria-hidden="true"></i></a>Interface Inheritance</h3>
<p>The advice to prefer composition to inheritance refers to <em>implementation inheritance</em> (i.e. extending a class). The disadvantages discussed  above do not apply to <em>interface inheritance</em> (i.e. implementing an interface).</p>
<p>In fact, the design choice you often have to make is between implementation inheritance or a combination of composition and interface inheritance.</p>
<p>In these situations, the advice is still to prefer the approach that uses composition.</p>
<p>For example, the well known composition based Decorator pattern:</p>
<pre><code class="lang-java"><span class="kd">class</span> <span class="nc">ProcessorUpperCaseDecorator</span> <span class="kd">implements</span> <span class="n">Processor</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Processor</span> <span class="n">child</span><span class="o">;</span>

  <span class="n">ProcessorUpperCaseDecorator</span><span class="o">(</span><span class="n">Processor</span> <span class="n">child</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">child</span> <span class="o">=</span> <span class="n">child</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">process</span><span class="o">(</span><span class="n">String</span> <span class="n">someString</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">child</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="n">someString</span><span class="o">.</span><span class="na">toUpperCase</span><span class="o">());</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre>
<p>Could also be implemented using inheritance</p>
<pre><code class="lang-java"><span class="kd">class</span> <span class="nc">InheritanceUpperCaseDecorator</span> <span class="kd">extends</span> <span class="n">ConcreteProcessor</span> <span class="o">{</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">process</span><span class="o">(</span><span class="n">String</span> <span class="n">someString</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="n">someString</span><span class="o">.</span><span class="na">toUpperCase</span><span class="o">());</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre>
<p>But, again, this solution would be less flexible.</p>
<p>With the composition based version we can decorate any <code>Processor</code>. With the inheritance version we would need to re-implement the decorator for each concrete type to which we wished to add the upper case behavior.</p>
<p>Many common OO patterns rely on the combination of Composition and interface inheritance.</p>
<h3 id="when-to-use-implementation-inheritance"><a name="when-to-use-implementation-inheritance" class="plugin-anchor" href="#when-to-use-implementation-inheritance"><i class="fa fa-link" aria-hidden="true"></i></a>When to Use Implementation Inheritance</h3>
<p>Almost anything that can be achieved with implementation inheritance can also be achieved using the combination of interface inheritance and composition.</p>
<p>So when should implementation inheritance be used?</p>
<p>Implementation inheritance has one single advantage over composition - it&apos;s less verbose.</p>
<p>So implementation inheritance should be used when <strong>both</strong> of the following conditions are met</p>
<ol>
<li>There is an IS-A relationship to be modelled</li>
<li>The composition based approach would result in too much boilerplate code</li>
</ol>
<p>The 2nd point is unfortunately entirely subjective.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="051_optimise_for_readability_not_performance.html" class="navigation navigation-prev " aria-label="Previous page: Optimise For Readability Not Performance">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="100_consider_code_generators_carefully.html" class="navigation navigation-next " aria-label="Next page: Consider Code Generators Carefully">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Prefer Composition","level":"1.3.9","depth":2,"next":{"title":"Consider Code Generators Carefully","level":"1.3.10","depth":2,"path":"style/100_consider_code_generators_carefully.md","ref":"style/100_consider_code_generators_carefully.md","articles":[]},"previous":{"title":"Optimise For Readability Not Performance","level":"1.3.8","depth":2,"path":"style/051_optimise_for_readability_not_performance.md","ref":"style/051_optimise_for_readability_not_performance.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["edit-link","etoc","anchors","expandable-chapters","pygments"],"pluginsConfig":{"etoc":{"mindepth":3,"maxdepth":4,"header":1,"h2lb":3,"notoc":false},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"pygments":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/egis/JavaForSmallTeams/blob/master/"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{},"expandable-chapters":{}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"style/052_prefer_composition.md","mtime":"2017-08-31T18:27:40.758Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2017-08-31T18:29:32.744Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-etoc/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

