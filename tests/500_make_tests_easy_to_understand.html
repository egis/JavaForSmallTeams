
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Make Tests Easy To Understand Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-etoc/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-pygments/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="600_understand_how_to_use_mocks_and_stubs.html" />
    
    
    <link rel="prev" href="400_pick_examples_carefully.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../process.html">
            
                <a href="../process.html">
            
                    
                    Process
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../process/100_build_fast_feedback_loops.html">
            
                <a href="../process/100_build_fast_feedback_loops.html">
            
                    
                    Build Fast Feedback Loops
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../process/200_instant_feedback.html">
            
                <a href="../process/200_instant_feedback.html">
            
                    
                    Instant Feedback
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../process/300_fast_feedback.html">
            
                <a href="../process/300_fast_feedback.html">
            
                    
                    Fast Feedback
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../process/400_slower_feedback.html">
            
                <a href="../process/400_slower_feedback.html">
            
                    
                    Slower Feedback
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../process/600_agree_the_language_you_use_for_tests.html">
            
                <a href="../process/600_agree_the_language_you_use_for_tests.html">
            
                    
                    Agree The Language You Use For Tests
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../process/700_use_coverage_as_a_tool_not_a_target.html">
            
                <a href="../process/700_use_coverage_as_a_tool_not_a_target.html">
            
                    
                    Use Coverage As A Tool Not A Target
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../style.html">
            
                <a href="../style.html">
            
                    
                    Style
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../style/001_remember_kiss_and_yagni.html">
            
                <a href="../style/001_remember_kiss_and_yagni.html">
            
                    
                    Remember Kiss And Yagni
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../style/002_prefer_reversible_decisions.html">
            
                <a href="../style/002_prefer_reversible_decisions.html">
            
                    
                    Prefer Reversible Decisions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../style/010_use_a_consistent_code_layout.html">
            
                <a href="../style/010_use_a_consistent_code_layout.html">
            
                    
                    Use A Consistent Code Layout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../style/020_prefer_readable_code_to_comments.html">
            
                <a href="../style/020_prefer_readable_code_to_comments.html">
            
                    
                    Prefer Readable Code To Comments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../style/030_javadoc_judiciously.html">
            
                <a href="../style/030_javadoc_judiciously.html">
            
                    
                    Javadoc Judiciously
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../style/040_keep_your_code_dry.html">
            
                <a href="../style/040_keep_your_code_dry.html">
            
                    
                    Keep Your Code Dry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../style/041_prefer_immutable_objects.html">
            
                <a href="../style/041_prefer_immutable_objects.html">
            
                    
                    Prefer Immutable Objects
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="../style/051_optimise_for_readability_not_performance.html">
            
                <a href="../style/051_optimise_for_readability_not_performance.html">
            
                    
                    Optimise For Readability Not Performance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="../style/052_prefer_composition.html">
            
                <a href="../style/052_prefer_composition.html">
            
                    
                    Prefer Composition
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10" data-path="../style/100_consider_code_generators_carefully.html">
            
                <a href="../style/100_consider_code_generators_carefully.html">
            
                    
                    Consider Code Generators Carefully
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.11" data-path="../style/200_group_methods_for_easy_comprehension.html">
            
                <a href="../style/200_group_methods_for_easy_comprehension.html">
            
                    
                    Group Methods For Easy Comprehension
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.12" data-path="../style/300_keep_methods_small_and_simple.html">
            
                <a href="../style/300_keep_methods_small_and_simple.html">
            
                    
                    Keep Methods Small And Simple
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.13" data-path="../style/400_methods_should_do_one_thing.html">
            
                <a href="../style/400_methods_should_do_one_thing.html">
            
                    
                    Methods Should Do One Thing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.14" data-path="../style/600_avoid_null.html">
            
                <a href="../style/600_avoid_null.html">
            
                    
                    Avoid Null
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.15" data-path="../style/601_keep_it_solid.html">
            
                <a href="../style/601_keep_it_solid.html">
            
                    
                    Keep It Solid
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.16" data-path="../style/700_use_final_liberally.html">
            
                <a href="../style/700_use_final_liberally.html">
            
                    
                    Use Final Liberally
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.17" data-path="../style/800_provide_no_more_than_one_worker_constructor.html">
            
                <a href="../style/800_provide_no_more_than_one_worker_constructor.html">
            
                    
                    Provide No More Than One Worker Constructor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.18" data-path="../style/900_avoid_checked_exceptions.html">
            
                <a href="../style/900_avoid_checked_exceptions.html">
            
                    
                    Avoid Checked Exceptions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.19" data-path="../style/901_make_dependencies_explicit.html">
            
                <a href="../style/901_make_dependencies_explicit.html">
            
                    
                    Make Dependencies Explicit
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../specifics.html">
            
                <a href="../specifics.html">
            
                    
                    Specifics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../specifics/100_know_how_to_implement_hashcode_and_equals.html">
            
                <a href="../specifics/100_know_how_to_implement_hashcode_and_equals.html">
            
                    
                    Know How To Implement Hashcode And Equals
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../specifics/200_do_not_reassign_parameters.html">
            
                <a href="../specifics/200_do_not_reassign_parameters.html">
            
                    
                    Do Not Reassign Parameters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../specifics/300_limit_scope.html">
            
                <a href="../specifics/300_limit_scope.html">
            
                    
                    Limit Scope
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../specifics/400_prefer_for_each_loops_to_for_loops.html">
            
                <a href="../specifics/400_prefer_for_each_loops_to_for_loops.html">
            
                    
                    Prefer For Each Loops To For Loops
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../specifics/500_prefer_maps_and_filters_to_imperative_loops.html">
            
                <a href="../specifics/500_prefer_maps_and_filters_to_imperative_loops.html">
            
                    
                    Prefer Maps And Filters To Imperative Loops
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../specifics/600_avoid_apis_from_prehistory.html">
            
                <a href="../specifics/600_avoid_apis_from_prehistory.html">
            
                    
                    Avoid Apis From Prehistory
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../specifics/700_beware_casts_and_generics_warnings.html">
            
                <a href="../specifics/700_beware_casts_and_generics_warnings.html">
            
                    
                    Beware Casts And Generics Warnings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="../specifics/800_do_not_use_magic_numbers.html">
            
                <a href="../specifics/800_do_not_use_magic_numbers.html">
            
                    
                    Do Not Use Magic Numbers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="../specifics/800_do_not_use_the_assert_keyword.html">
            
                <a href="../specifics/800_do_not_use_the_assert_keyword.html">
            
                    
                    Do Not Use The Assert Keyword
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.10" data-path="../specifics/900_avoid_floats_and_doubles.html">
            
                <a href="../specifics/900_avoid_floats_and_doubles.html">
            
                    
                    Avoid Floats And Doubles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.11" data-path="../specifics/1000_do_not_use_reflection.html">
            
                <a href="../specifics/1000_do_not_use_reflection.html">
            
                    
                    Do Not Use Reflection
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../tests.html">
            
                <a href="../tests.html">
            
                    
                    Tests
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="100_write_specifications_not_tests.html">
            
                <a href="100_write_specifications_not_tests.html">
            
                    
                    Write Specifications Not Tests
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="200_think_units_not_methods.html">
            
                <a href="200_think_units_not_methods.html">
            
                    
                    Think Units Not Methods
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="300_name_tests_with_a_specification_style.html">
            
                <a href="300_name_tests_with_a_specification_style.html">
            
                    
                    Name Tests With A Specification Style
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="400_pick_examples_carefully.html">
            
                <a href="400_pick_examples_carefully.html">
            
                    
                    Pick Examples Carefully
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5.5" data-path="500_make_tests_easy_to_understand.html">
            
                <a href="500_make_tests_easy_to_understand.html">
            
                    
                    Make Tests Easy To Understand
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="600_understand_how_to_use_mocks_and_stubs.html">
            
                <a href="600_understand_how_to_use_mocks_and_stubs.html">
            
                    
                    Understand How To Use Mocks And Stubs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="700_understand_your_options_for_code_reuse.html">
            
                <a href="700_understand_your_options_for_code_reuse.html">
            
                    
                    Understand Your Options For Code Reuse
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="750_write_repeatable_tests.html">
            
                <a href="750_write_repeatable_tests.html">
            
                    
                    Write Repeatable Tests
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="800_only_unit_test_code_it_makes_sense_to_unit_test.html">
            
                <a href="800_only_unit_test_code_it_makes_sense_to_unit_test.html">
            
                    
                    Only Unit Test Code It Makes Sense To Unit Test
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.10" data-path="900_testing_FAQS.html">
            
                <a href="900_testing_FAQS.html">
            
                    
                    Testing FAQS
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../badadvice.html">
            
                <a href="../badadvice.html">
            
                    
                    Bad advice
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../badadvice/010_use_getters_and_setters.html">
            
                <a href="../badadvice/010_use_getters_and_setters.html">
            
                    
                    Always use Getters and Setters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../badadvice/100_single_exit_point_rules.html">
            
                <a href="../badadvice/100_single_exit_point_rules.html">
            
                    
                    Single Exit Point Rules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../badadvice/200_always_use_a_StringBuffer.html">
            
                <a href="../badadvice/200_always_use_a_StringBuffer.html">
            
                    
                    Always Use A StringBuffer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../badadvice/300_hungarian_notation.html">
            
                <a href="../badadvice/300_hungarian_notation.html">
            
                    
                    Hungarian Notation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Make Tests Easy To Understand</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="make-tests-easy-to-understand"><a name="make-tests-easy-to-understand" class="plugin-anchor" href="#make-tests-easy-to-understand"><i class="fa fa-link" aria-hidden="true"></i></a>Make Tests Easy to Understand</h2>
<p>One of our goals when writing a test is to document what the code under tests does.</p>
<p>We achieve this in part by choosing clear specification style names for each test case, but we must also ensure that the code implementing each test case is easy to understand.</p>
<p>Some techniques that help achieve this are discussed below.</p>
<h3 id="make-test-structure-clear"><a name="make-test-structure-clear" class="plugin-anchor" href="#make-test-structure-clear"><i class="fa fa-link" aria-hidden="true"></i></a>Make Test Structure Clear</h3>
<p>A test can be viewed as having three parts:</p>
<ul>
<li>Given - create the values and objects required for the test</li>
<li>When - executes the code under test</li>
<li>Then - verifies the output/behavior is as expected</li>
</ul>
<p>These stages are also sometimes called <em>arrange</em>, <em>act</em> and <em>assert</em> by people particularly attached to the letter &apos;a&apos;.</p>
<p>Although it is important that these three stages are visible, trying to rigorously separate them or label them with comments adds noise to a test.</p>
<p><strong>Bad</strong></p>
<pre><code class="lang-java">  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldRetrieveValuesInOrderTheyAreAdded</span><span class="o">()</span> <span class="o">{</span>

    <span class="c1">// given</span>
    <span class="n">Stack</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">testee</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Stack</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;();</span>
    <span class="n">String</span> <span class="n">expectedFirstValue</span> <span class="o">=</span> <span class="s">&quot;a&quot;</span><span class="o">;</span>
    <span class="n">String</span> <span class="n">expectedSecondValue</span> <span class="o">=</span> <span class="s">&quot;b&quot;</span><span class="o">;</span>

    <span class="c1">// when</span>
    <span class="n">testee</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="n">expectedFirstValue</span><span class="o">);</span>
    <span class="n">testee</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="n">expectedSecondValue</span><span class="o">);</span>
    <span class="n">String</span> <span class="n">actualFirstValue</span> <span class="o">=</span> <span class="n">testee</span><span class="o">.</span><span class="na">pop</span><span class="o">();</span>
    <span class="n">String</span> <span class="n">actualSecondValue</span> <span class="o">=</span> <span class="n">testee</span><span class="o">.</span><span class="na">pop</span><span class="o">();</span>

    <span class="c1">// then</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">actualFirstValue</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">secondValue</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">actualSecondValue</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">firstValue</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre>
<p><strong>Better</strong></p>
<pre><code class="lang-java">  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldRetrieveValuesInOrderTheyAreAdded</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Stack</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">testee</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Stack</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;();</span>
    <span class="n">testee</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="s">&quot;a&quot;</span><span class="o">);</span>
    <span class="n">testee</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="s">&quot;b&quot;</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">testee</span><span class="o">.</span><span class="na">pop</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">&quot;b&quot;</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">testee</span><span class="o">.</span><span class="na">pop</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">&quot;a&quot;</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre>
<h3 id="follow-standard-tea-naming-convention-for-test-variables"><a name="follow-standard-tea-naming-convention-for-test-variables" class="plugin-anchor" href="#follow-standard-tea-naming-convention-for-test-variables"><i class="fa fa-link" aria-hidden="true"></i></a>Follow Standard TEA Naming Convention for Test Variables</h3>
<p>Establishing simple conventions can make some very basic things about a test clear to a reader.</p>
<p>If the unit you are testing is a class make this clear by always naming it <code>testee</code> within a test.</p>
<p>If you need to store an expected value in a variable, call it <code>expected</code> (but don&apos;t store it in a variable just for the sake of it).</p>
<p>If you need to store a result that you will compare against an expected value in variable, name it <code>actual</code> (but don&apos;t store it in a variable just for the sake of it).</p>
<p>If you have stubbed a participant consider naming it <code>stubbedFoo</code>, if it is acting as a mock name it <code>mockedFoo</code>. This rule is less hard than the others - decide on a case by case basis whether you think it makes your test more or less readable.</p>
<h3 id="highlight-what-is-important-hide-what-is-not"><a name="highlight-what-is-important-hide-what-is-not" class="plugin-anchor" href="#highlight-what-is-important-hide-what-is-not"><i class="fa fa-link" aria-hidden="true"></i></a>Highlight What is Important, Hide What is Not</h3>
<p>It should be possible to read each test case at a glance - so make things clear by highlighting what is important for that test case and hiding what is not.</p>
<p>If an aspect of the input is important to the test case, highlight it by setting it <strong>explicitly</strong> in the test case - don&apos;t rely on that value being set in a generic setup method.</p>
<p>Even if the same value is set by default, it is better to re-supply it in the test so it is clearly visible.</p>
<p>If a particular value is not important, indicate this to the reader by using well-known neutral values such as <code>&quot;foo&quot;</code> for strings, or use clear names such as <code>someInt</code> or <code>anInt</code> for variables and methods that supply values.</p>
<p>Supplying values via a method call makes them less visible.</p>
<p>What is important in the test below?</p>
<p><strong>Bad</strong></p>
<pre><code class="lang-java">  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldXXX</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">MyClass</span> <span class="n">testee</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyClass</span><span class="o">();</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">testee</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="s">&quot;&quot;</span><span class="o">,</span> <span class="mi">3</span><span class="o">))</span>
      <span class="o">.</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">Status</span><span class="o">.</span><span class="na">FAIL</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre>
<p>How about this version?</p>
<p><strong>Better</strong></p>
<pre><code class="lang-java">  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldXXX</span><span class="o">()</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">invalidValue</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>
    <span class="n">MyClass</span> <span class="n">testee</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyClass</span><span class="o">();</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">testee</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="n">anInt</span><span class="o">(),</span> <span class="n">aString</span><span class="o">(),</span> <span class="n">invalidValue</span><span class="o">))</span>
      <span class="o">.</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">Status</span><span class="o">.</span><span class="na">FAIL</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre>
<p>While we need additional context to understand why <code>3</code> is an invalid value, it should be clear that the first two parameters to the <code>process</code> method are not important to the behavior we are specifying.</p>
<p>Why is it important that the testee below returns the enum <code>CONTINUE</code>?</p>
<p><strong>Bad</strong></p>
<pre><code class="lang-java">  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldXXX</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">testee</span><span class="o">.</span><span class="na">process</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">CONTINUE</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre>
<p>If we look through the rest of the class we might find:</p>
<pre><code class="lang-java">  <span class="nd">@Before</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span>
     <span class="n">MyClass</span> <span class="n">testee</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyClass</span><span class="o">();</span>
     <span class="n">testee</span><span class="o">.</span><span class="na">setDefaultProcessState</span><span class="o">(</span><span class="n">CONTINUE</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre>
<p>Other tests might not need to care about what the default state is, but this test does so we should write:</p>
<p><strong>Better</strong></p>
<pre><code class="lang-java">  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldXXX</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">testee</span><span class="o">.</span><span class="na">setDefaultProcessState</span><span class="o">(</span><span class="n">CONTINUE</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">testee</span><span class="o">.</span><span class="na">process</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">CONTINUE</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre>
<p>As we start to deal with more complex domain objects, it becomes harder to separate the important values from the ones that are required to construct valid objects but not of particular interest to our test.
Fortunately, we can use the builder pattern to ease the pain, reduce duplication, and keep the tests readable.</p>
<h3 id="name-values-meaningfully"><a name="name-values-meaningfully" class="plugin-anchor" href="#name-values-meaningfully"><i class="fa fa-link" aria-hidden="true"></i></a>Name Values Meaningfully</h3>
<p>If a value has an important meaning, make that meaning clear e.g.:</p>
<pre><code class="lang-java">  <span class="n">Foo</span> <span class="n">testee</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Foo</span><span class="o">(</span><span class="n">PERFORM_VALIDATION</span><span class="o">);</span>
</code></pre>
<p>instead of:</p>
<pre><code class="lang-java">  <span class="n">Foo</span> <span class="n">testee</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Foo</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</code></pre>
<h3 id="write-damp-test-code"><a name="write-damp-test-code" class="plugin-anchor" href="#write-damp-test-code"><i class="fa fa-link" aria-hidden="true"></i></a>Write DAMP Test Code</h3>
<p>As we have seen, in order to highlight that a value is important to a test, we need to keep it within the test method that uses it. This may introduce duplication which we might not accept in normal code - but test code is a little different.</p>
<p>Copy and paste coding is bad in tests as well as production code - the more code there is, the harder it is to read and a change to a concern will result in shotgun surgery if it has been duplicated throughout the tests.</p>
<p>Repetition should therefore generally be avoided in test code.</p>
<p>Test code <strong>is</strong> different from production code however.</p>
<p>Test code must tell more of a story - highlighting what is important and hiding what is not. Test code should not be as DRY ( <strong>D</strong>on&apos;t <strong>R</strong>epeat <strong>Y</strong>ourself ) as production code. It should be DAMP ( contain <strong>D</strong>escriptive <strong>A</strong>nd <strong>M</strong>eaningful <strong>P</strong>hrases ).</p>
<p>If refactoring a small amount of code out of a test method into a shared method hides what is happening, accept the duplication and leave it in place. If it does not affect readability then refactor mercilessly.</p>
<h2 id="choose-the-right-assertion-method"><a name="choose-the-right-assertion-method" class="plugin-anchor" href="#choose-the-right-assertion-method"><i class="fa fa-link" aria-hidden="true"></i></a>Choose the Right Assertion Method</h2>
<p>When a test fails, a good assertion tells you what is wrong.</p>
<p>Although JUnit allows you to supply an assertion message this adds noise to the test. Like comments, these messages should be saved for those occasions when you cannot communicate using code alone.</p>
<p>Bad</p>
<pre><code class="lang-java"><span class="n">assertTrue</span><span class="o">(</span><span class="s">&quot;Expected 2 but got &quot;</span> <span class="o">+</span> <span class="n">actual</span><span class="o">,</span> <span class="n">actual</span> <span class="o">==</span> <span class="mi">2</span><span class="o">);</span>
</code></pre>
<p>Good</p>
<pre><code class="lang-java"><span class="n">assertEquals</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">actual</span><span class="o">);</span>
</code></pre>
<p>The built in assertions are fairly limited. Alternative assertion libraries such as AssertJ provide richer functionality and result in more readable code.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="400_pick_examples_carefully.html" class="navigation navigation-prev " aria-label="Previous page: Pick Examples Carefully">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="600_understand_how_to_use_mocks_and_stubs.html" class="navigation navigation-next " aria-label="Next page: Understand How To Use Mocks And Stubs">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Make Tests Easy To Understand","level":"1.5.5","depth":2,"next":{"title":"Understand How To Use Mocks And Stubs","level":"1.5.6","depth":2,"path":"tests/600_understand_how_to_use_mocks_and_stubs.md","ref":"tests/600_understand_how_to_use_mocks_and_stubs.md","articles":[]},"previous":{"title":"Pick Examples Carefully","level":"1.5.4","depth":2,"path":"tests/400_pick_examples_carefully.md","ref":"tests/400_pick_examples_carefully.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["edit-link","etoc","anchors","expandable-chapters","pygments"],"pluginsConfig":{"etoc":{"mindepth":3,"maxdepth":4,"header":1,"h2lb":3,"notoc":false},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"pygments":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/egis/JavaForSmallTeams/blob/master/"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{},"expandable-chapters":{}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"tests/500_make_tests_easy_to_understand.md","mtime":"2017-08-31T18:27:40.766Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2017-08-31T18:29:32.744Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-etoc/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

