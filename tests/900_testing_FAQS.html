
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Testing FAQS Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-etoc/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-pygments/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../badadvice.html" />
    
    
    <link rel="prev" href="800_only_unit_test_code_it_makes_sense_to_unit_test.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../process.html">
            
                <a href="../process.html">
            
                    
                    Process
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../process/100_build_fast_feedback_loops.html">
            
                <a href="../process/100_build_fast_feedback_loops.html">
            
                    
                    Build Fast Feedback Loops
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../process/200_instant_feedback.html">
            
                <a href="../process/200_instant_feedback.html">
            
                    
                    Instant Feedback
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../process/300_fast_feedback.html">
            
                <a href="../process/300_fast_feedback.html">
            
                    
                    Fast Feedback
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../process/400_slower_feedback.html">
            
                <a href="../process/400_slower_feedback.html">
            
                    
                    Slower Feedback
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../process/600_agree_the_language_you_use_for_tests.html">
            
                <a href="../process/600_agree_the_language_you_use_for_tests.html">
            
                    
                    Agree The Language You Use For Tests
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../process/700_use_coverage_as_a_tool_not_a_target.html">
            
                <a href="../process/700_use_coverage_as_a_tool_not_a_target.html">
            
                    
                    Use Coverage As A Tool Not A Target
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../style.html">
            
                <a href="../style.html">
            
                    
                    Style
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../style/001_remember_kiss_and_yagni.html">
            
                <a href="../style/001_remember_kiss_and_yagni.html">
            
                    
                    Remember Kiss And Yagni
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../style/002_prefer_reversible_decisions.html">
            
                <a href="../style/002_prefer_reversible_decisions.html">
            
                    
                    Prefer Reversible Decisions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../style/010_use_a_consistent_code_layout.html">
            
                <a href="../style/010_use_a_consistent_code_layout.html">
            
                    
                    Use A Consistent Code Layout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../style/020_prefer_readable_code_to_comments.html">
            
                <a href="../style/020_prefer_readable_code_to_comments.html">
            
                    
                    Prefer Readable Code To Comments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../style/030_javadoc_judiciously.html">
            
                <a href="../style/030_javadoc_judiciously.html">
            
                    
                    Javadoc Judiciously
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../style/040_keep_your_code_dry.html">
            
                <a href="../style/040_keep_your_code_dry.html">
            
                    
                    Keep Your Code Dry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../style/041_prefer_immutable_objects.html">
            
                <a href="../style/041_prefer_immutable_objects.html">
            
                    
                    Prefer Immutable Objects
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="../style/051_optimise_for_readability_not_performance.html">
            
                <a href="../style/051_optimise_for_readability_not_performance.html">
            
                    
                    Optimise For Readability Not Performance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="../style/052_prefer_composition.html">
            
                <a href="../style/052_prefer_composition.html">
            
                    
                    Prefer Composition
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10" data-path="../style/100_consider_code_generators_carefully.html">
            
                <a href="../style/100_consider_code_generators_carefully.html">
            
                    
                    Consider Code Generators Carefully
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.11" data-path="../style/200_group_methods_for_easy_comprehension.html">
            
                <a href="../style/200_group_methods_for_easy_comprehension.html">
            
                    
                    Group Methods For Easy Comprehension
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.12" data-path="../style/300_keep_methods_small_and_simple.html">
            
                <a href="../style/300_keep_methods_small_and_simple.html">
            
                    
                    Keep Methods Small And Simple
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.13" data-path="../style/400_methods_should_do_one_thing.html">
            
                <a href="../style/400_methods_should_do_one_thing.html">
            
                    
                    Methods Should Do One Thing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.14" data-path="../style/600_avoid_null.html">
            
                <a href="../style/600_avoid_null.html">
            
                    
                    Avoid Null
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.15" data-path="../style/601_keep_it_solid.html">
            
                <a href="../style/601_keep_it_solid.html">
            
                    
                    Keep It Solid
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.16" data-path="../style/700_use_final_liberally.html">
            
                <a href="../style/700_use_final_liberally.html">
            
                    
                    Use Final Liberally
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.17" data-path="../style/800_provide_no_more_than_one_worker_constructor.html">
            
                <a href="../style/800_provide_no_more_than_one_worker_constructor.html">
            
                    
                    Provide No More Than One Worker Constructor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.18" data-path="../style/900_avoid_checked_exceptions.html">
            
                <a href="../style/900_avoid_checked_exceptions.html">
            
                    
                    Avoid Checked Exceptions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.19" data-path="../style/901_make_dependencies_explicit.html">
            
                <a href="../style/901_make_dependencies_explicit.html">
            
                    
                    Make Dependencies Explicit
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../specifics.html">
            
                <a href="../specifics.html">
            
                    
                    Specifics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../specifics/100_know_how_to_implement_hashcode_and_equals.html">
            
                <a href="../specifics/100_know_how_to_implement_hashcode_and_equals.html">
            
                    
                    Know How To Implement Hashcode And Equals
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../specifics/200_do_not_reassign_parameters.html">
            
                <a href="../specifics/200_do_not_reassign_parameters.html">
            
                    
                    Do Not Reassign Parameters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../specifics/300_limit_scope.html">
            
                <a href="../specifics/300_limit_scope.html">
            
                    
                    Limit Scope
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../specifics/400_prefer_for_each_loops_to_for_loops.html">
            
                <a href="../specifics/400_prefer_for_each_loops_to_for_loops.html">
            
                    
                    Prefer For Each Loops To For Loops
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../specifics/500_prefer_maps_and_filters_to_imperative_loops.html">
            
                <a href="../specifics/500_prefer_maps_and_filters_to_imperative_loops.html">
            
                    
                    Prefer Maps And Filters To Imperative Loops
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../specifics/600_avoid_apis_from_prehistory.html">
            
                <a href="../specifics/600_avoid_apis_from_prehistory.html">
            
                    
                    Avoid Apis From Prehistory
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../specifics/700_beware_casts_and_generics_warnings.html">
            
                <a href="../specifics/700_beware_casts_and_generics_warnings.html">
            
                    
                    Beware Casts And Generics Warnings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="../specifics/800_do_not_use_magic_numbers.html">
            
                <a href="../specifics/800_do_not_use_magic_numbers.html">
            
                    
                    Do Not Use Magic Numbers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="../specifics/800_do_not_use_the_assert_keyword.html">
            
                <a href="../specifics/800_do_not_use_the_assert_keyword.html">
            
                    
                    Do Not Use The Assert Keyword
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.10" data-path="../specifics/900_avoid_floats_and_doubles.html">
            
                <a href="../specifics/900_avoid_floats_and_doubles.html">
            
                    
                    Avoid Floats And Doubles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.11" data-path="../specifics/1000_do_not_use_reflection.html">
            
                <a href="../specifics/1000_do_not_use_reflection.html">
            
                    
                    Do Not Use Reflection
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../tests.html">
            
                <a href="../tests.html">
            
                    
                    Tests
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="100_write_specifications_not_tests.html">
            
                <a href="100_write_specifications_not_tests.html">
            
                    
                    Write Specifications Not Tests
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="200_think_units_not_methods.html">
            
                <a href="200_think_units_not_methods.html">
            
                    
                    Think Units Not Methods
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="300_name_tests_with_a_specification_style.html">
            
                <a href="300_name_tests_with_a_specification_style.html">
            
                    
                    Name Tests With A Specification Style
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="400_pick_examples_carefully.html">
            
                <a href="400_pick_examples_carefully.html">
            
                    
                    Pick Examples Carefully
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="500_make_tests_easy_to_understand.html">
            
                <a href="500_make_tests_easy_to_understand.html">
            
                    
                    Make Tests Easy To Understand
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="600_understand_how_to_use_mocks_and_stubs.html">
            
                <a href="600_understand_how_to_use_mocks_and_stubs.html">
            
                    
                    Understand How To Use Mocks And Stubs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="700_understand_your_options_for_code_reuse.html">
            
                <a href="700_understand_your_options_for_code_reuse.html">
            
                    
                    Understand Your Options For Code Reuse
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="750_write_repeatable_tests.html">
            
                <a href="750_write_repeatable_tests.html">
            
                    
                    Write Repeatable Tests
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="800_only_unit_test_code_it_makes_sense_to_unit_test.html">
            
                <a href="800_only_unit_test_code_it_makes_sense_to_unit_test.html">
            
                    
                    Only Unit Test Code It Makes Sense To Unit Test
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5.10" data-path="900_testing_FAQS.html">
            
                <a href="900_testing_FAQS.html">
            
                    
                    Testing FAQS
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../badadvice.html">
            
                <a href="../badadvice.html">
            
                    
                    Bad advice
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../badadvice/010_getters_and_setters.md">
            
                <span>
            
                    
                    Always use Getters and Setters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../badadvice/100_single_exit_point_rules.html">
            
                <a href="../badadvice/100_single_exit_point_rules.html">
            
                    
                    Single Exit Point Rules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../badadvice/200_always_use_a_StringBuffer.html">
            
                <a href="../badadvice/200_always_use_a_StringBuffer.html">
            
                    
                    Always Use A StringBuffer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../badadvice/300_hungarian_notation.html">
            
                <a href="../badadvice/300_hungarian_notation.html">
            
                    
                    Hungarian Notation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Testing FAQS</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="testing-faq"><a name="testing-faq" class="plugin-anchor" href="#testing-faq"><i class="fa fa-link" aria-hidden="true"></i></a>Testing FAQ</h2>
<h3 id="how-do-i-test-a-private-method"><a name="how-do-i-test-a-private-method" class="plugin-anchor" href="#how-do-i-test-a-private-method"><i class="fa fa-link" aria-hidden="true"></i></a>How Do I Test a Private Method?</h3>
<p>You don&apos;t test methods (private or public), you test the behavior of a unit as a whole.</p>
<p>If you cannot exercise the logic of a private method via the public interface, is that logic actually required? If it is required, and is sufficiently complex that it is causing you testing pain, then perhaps you should extract that concern into a separate unit that can be tested in isolation and injected in via the constructor?</p>
<h3 id="how-do-i-test-a-void-method"><a name="how-do-i-test-a-void-method" class="plugin-anchor" href="#how-do-i-test-a-void-method"><i class="fa fa-link" aria-hidden="true"></i></a>How Do I Test a Void Method?</h3>
<p>You don&apos;t test methods (void or not), you test the behavior of a unit as a whole.</p>
<p>If the method is void, it must be performing some sort of side effect that can be checked by either state testing or interaction testing.</p>
<p>For example, if you are trying to &apos;test the add method&apos; of collection class, you should probably instead be writing tests like:</p>
<pre><code class="lang-java"><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldIncreaseInSizeWhenItemsAdded</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Collection</span> <span class="n">testee</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">();</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">testee</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
    <span class="n">testee</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;itemA&quot;</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">testee</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
    <span class="n">testee</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;itemB&quot;</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">testee</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
<span class="o">}</span>
</code></pre>
<h3 id="how-do-i-test-code-that-reasons-about-the-current-datetime"><a name="how-do-i-test-code-that-reasons-about-the-current-datetime" class="plugin-anchor" href="#how-do-i-test-code-that-reasons-about-the-current-datetime"><i class="fa fa-link" aria-hidden="true"></i></a>How do I Test Code That Reasons About the Current Date/Time?</h3>
<p>A bad solution is to use a static method (such as joda time&apos;s <code>setCurrentMillisFixed</code>) to set the current date.</p>
<p>A good solution is to inject a strategy for retrieving the date/time into your class as a dependency.</p>
<p>Java 8 provides the <code>java.time.Clock</code> class which can be used for this purpose.</p>
<p>The static factory method <code>fixed</code> will create an instance that represents a constant time. Other methods provide implementations suitable for production use.</p>
<p>Java 7 does not provide an out of the box class for this purpose so you will need to roll your own.</p>
<h3 id="do-i-need-to-implement-a-teardown-method-for-my-test"><a name="do-i-need-to-implement-a-teardown-method-for-my-test" class="plugin-anchor" href="#do-i-need-to-implement-a-teardown-method-for-my-test"><i class="fa fa-link" aria-hidden="true"></i></a>Do I Need to Implement a Teardown Method for my Test?</h3>
<p>This used to be a requirement for all JUnit 3 tests. If you didn&apos;t nullify all members of a test class in a teardown your test suite began to eat memory as it grew.</p>
<p>This is not a requirement for vanilla JUnit 4 tests, but it is possible that you may need to do so if you are using a custom runner.</p>
<h3 id="whats-the-difference-between-errors-and-failures"><a name="whats-the-difference-between-errors-and-failures" class="plugin-anchor" href="#whats-the-difference-between-errors-and-failures"><i class="fa fa-link" aria-hidden="true"></i></a>What&apos;s the Difference Between Errors and Failures?</h3>
<p>You should try to design your tests to produce <strong>failures</strong> when the code is logically wrong. Your tests should only produce errors when something unexpected has happened.</p>
<h3 id="how-should-i-test-for-expected-exceptions"><a name="how-should-i-test-for-expected-exceptions" class="plugin-anchor" href="#how-should-i-test-for-expected-exceptions"><i class="fa fa-link" aria-hidden="true"></i></a>How Should I Test for Expected Exceptions?</h3>
<p>It depends.</p>
<p>The built in:</p>
<pre><code class="lang-java"><span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="n">FooException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="n">shouldThrowFooExceptionWhenFeelsLikeIt</span>
</code></pre>
<p>Is concise and suffices for simple scenarios, but has a gotcha. If the test method exercises more than one method of the testee, the expectation applies to the whole test method rather than the specific interaction with the testee that is expected to throw it.</p>
<p>If data held within the exception is important, it is also not possible to assert on it with this method.</p>
<p>The traditional solution is to use a try catch block:</p>
<pre><code class="lang-java"><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldThrowFooExceptionWhenFeelsLikeIt</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">try</span> <span class="o">{</span>
    <span class="n">testee</span><span class="o">.</span><span class="na">doStuff</span><span class="o">();</span>
    <span class="n">fail</span><span class="o">(</span><span class="s">&quot;Expected an exception&quot;</span><span class="o">);</span>
  <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FooException</span> <span class="n">expectedException</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">expectedException</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="s">&quot;felt like it&quot;</span><span class="o">));</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p>This is easy to follow, but a little verbose. It is also easy to forget to include the call to <code>fail()</code> if you are not test driving your code.</p>
<p>JUnit now provides an alternate solution in the form of the &apos;ExpectedException&apos; method rule. This allows for more fine grained exception checking:</p>
<pre><code class="lang-java"><span class="nd">@Rule</span>
<span class="kd">public</span> <span class="n">ExpectedException</span> <span class="n">thrown</span><span class="o">=</span> <span class="n">ExpectedException</span><span class="o">.</span><span class="na">none</span><span class="o">();</span>

<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">foo</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
  <span class="n">thrown</span><span class="o">.</span><span class="na">expect</span><span class="o">(</span><span class="n">FooException</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="n">thrown</span><span class="o">.</span><span class="na">expectMessage</span><span class="o">(</span><span class="s">&quot;felt like it&quot;</span><span class="o">);</span>

  <span class="n">testee</span><span class="o">.</span><span class="na">doStuff</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>
<p>This is more concise, but breaks the usual given/when/then flow of a test by moving the then part to the start of the method.</p>
<p>For Java 8 AssertJ provides some custom assertions that can be used without breaking this flow.</p>
<pre><code class="lang-java"><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testException</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">assertThatThrownBy</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="n">testee</span><span class="o">.</span><span class="na">doStuff</span><span class="o">();</span> <span class="o">})</span>
   <span class="o">.</span><span class="na">isInstanceOf</span><span class="o">(</span><span class="n">Exception</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
   <span class="o">.</span><span class="na">hasMessageContaining</span><span class="o">(</span><span class="s">&quot;felt like it&quot;</span><span class="o">);</span>
<span class="o">}</span>
</code></pre>
<p>Although it maintains the flow, the lambda in which the testee is called looks a little ugly.</p>
<p>When it can be used we recommend sticking with the concise <code>expected =</code> format. For more complex situations it is largely a matter of taste.</p>
<h3 id="how-do-i-test-an-abstract-class"><a name="how-do-i-test-an-abstract-class" class="plugin-anchor" href="#how-do-i-test-an-abstract-class"><i class="fa fa-link" aria-hidden="true"></i></a>How Do I Test an Abstract Class?</h3>
<p>An abstract class is just a dependency that some other code will use - a dependency that you have made harder than usual to isolate due to your choice to make it an abstract class.</p>
<p>So first off, would your design look better if the functionality was being re-used by composition rather than inheritance?</p>
<p>Assuming that you can&apos;t improve your design by getting rid of the abstract class you can either:</p>
<ul>
<li>Treat it as an implementation detail and check that each of its clients behaves as expected.</li>
<li>Test it in isolation by creating an anonymous concrete class</li>
</ul>
<p>The first approach will result in tests that are less tied to the implementation, but there will be repetition between the tests for each subclass.</p>
<p>The second approach will avoid repetition but is tied to the implementation and is likely to be brittle.</p>
<h3 id="how-do-i-test-hashcode-and-equals"><a name="how-do-i-test-hashcode-and-equals" class="plugin-anchor" href="#how-do-i-test-hashcode-and-equals"><i class="fa fa-link" aria-hidden="true"></i></a>How Do I test Hashcode and Equals?</h3>
<p>Testing hashcode and equals can be fiddly and time consuming, which raises questions about whether it is time well spent given that the code is likely to have been auto-generated.</p>
<p>Equals verifier project provides a good (partial) solution:</p>
<p><a href="http://www.jqno.nl/equalsverifier/" target="_blank">http://www.jqno.nl/equalsverifier/</a></p>
<p>It checks that a class fulfills the hashcode-equals contract with a single line test that is trivial to write:</p>
<pre><code class="lang-java">  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldObeyHashCodeEqualsContract</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">EqualsVerifier</span><span class="o">.</span><span class="na">forClass</span><span class="o">(</span><span class="n">MyValue</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">verify</span><span class="o">();</span>
  <span class="o">}</span>
</code></pre>
<p>It does, however, do a very thorough job of checking the contract - including how it interacts with inheritance. It is non-trivial to make a non-final class conform to the contract.</p>
<p>Although equals verifier does a good job of checking the hashcode equals contract, it has no knowledge of how you expect the methods to actually behave. If you wish equality to (for example) be defined by a single ID field only, you must write additional tests that verify this behavior.</p>
<p>For the common scenario of a class that should be considered equal based on all of its fields the behavior may be checked in a single test:</p>
<pre><code class="lang-java">  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldObeyHashCodeEqualsContract</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">EqualsVerifier</span><span class="o">.</span><span class="na">forClass</span><span class="o">(</span><span class="n">MyValue</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">allFieldsShouldBeUsed</span><span class="o">().</span><span class="na">verify</span><span class="o">();</span>
  <span class="o">}</span>
</code></pre>
<p>This may become the default behavior in a future version of EqualsVerifier, but must be specifically specified in 1.7.5</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="800_only_unit_test_code_it_makes_sense_to_unit_test.html" class="navigation navigation-prev " aria-label="Previous page: Only Unit Test Code It Makes Sense To Unit Test">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../badadvice.html" class="navigation navigation-next " aria-label="Next page: Bad advice">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Testing FAQS","level":"1.5.10","depth":2,"next":{"title":"Bad advice","level":"1.6","depth":1,"path":"badadvice.md","ref":"badadvice.md","articles":[{"title":"Always use Getters and Setters","level":"1.6.1","depth":2,"path":"badadvice/010_getters_and_setters.md","ref":"badadvice/010_getters_and_setters.md","articles":[]},{"title":"Single Exit Point Rules","level":"1.6.2","depth":2,"path":"badadvice/100_single_exit_point_rules.md","ref":"badadvice/100_single_exit_point_rules.md","articles":[]},{"title":"Always Use A StringBuffer","level":"1.6.3","depth":2,"path":"badadvice/200_always_use_a_StringBuffer.md","ref":"badadvice/200_always_use_a_StringBuffer.md","articles":[]},{"title":"Hungarian Notation","level":"1.6.4","depth":2,"path":"badadvice/300_hungarian_notation.md","ref":"badadvice/300_hungarian_notation.md","articles":[]}]},"previous":{"title":"Only Unit Test Code It Makes Sense To Unit Test","level":"1.5.9","depth":2,"path":"tests/800_only_unit_test_code_it_makes_sense_to_unit_test.md","ref":"tests/800_only_unit_test_code_it_makes_sense_to_unit_test.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["edit-link","etoc","anchors","expandable-chapters","pygments"],"pluginsConfig":{"etoc":{"mindepth":3,"maxdepth":4,"header":1,"h2lb":3,"notoc":false},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"pygments":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/egis/JavaForSmallTeams/blob/master/"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{},"expandable-chapters":{}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"tests/900_testing_FAQS.md","mtime":"2017-08-31T17:22:53.474Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2017-08-31T17:25:53.432Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-etoc/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

